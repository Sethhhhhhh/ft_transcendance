// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
	provider = "prisma-client-js"
}

datasource db {
	provider = "postgresql"
	url      = env("DATABASE_URL")
}

model User {
	id				Int					@id @default(autoincrement())
	username		String				@unique
	email			String				@unique
	password		String
	isAuth			Boolean				@default(false)

	avatar			String				@default("default.png")

	level			Int					@default(0)
	experience		Int					@default(0)
	nextLevel		Int					@default(100)

	rankPoint       Int                 @default(0)

	token	        Token?

	friends			Friend[]			@relation("friends")
	friendsRequests	Friend[]			@relation("friendsRequests")
}

model Token {
	id				Int					@id	@default(autoincrement())
	token			String				@unique
	user			User				@relation(fields: [userId], references: [id])
	userId			Int					@unique
}

model Friend {
	id              Int             @id @default(autoincrement())
	
	sender          User           	@relation("friends", fields: [senderId], references: [id])
	senderId        Int

	receiver        User            @relation("friendsRequests", fields: [receiverId], references: [id])
	receiverId      Int  

	accepted        Boolean         @default(false)

	@@unique([senderId, receiverId])
}